<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Premium 3D & Depth Effects matching Index Style */
        .node-card-3d {
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            transform-style: preserve-3d;
            perspective: 1200px;
        }
        .node-card-3d:hover {
            transform: translateY(-12px) rotateX(4deg) rotateY(-2deg);
            box-shadow: 0 30px 60px -15px rgba(37, 99, 235, 0.3);
        }
        .glass-panel-3d {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        }
        .floating-3d {
            animation: float3d 5s ease-in-out infinite;
        }
        @keyframes float3d {
            0%, 100% { transform: translateZ(20px) translateY(0); }
            50% { transform: translateZ(50px) translateY(-15px); }
        }
        .glow-node { position: relative; }
        .glow-node::after {
            content: ''; position: absolute; inset: -2px;
            background: linear-gradient(45deg, #2563eb, #10b981, #f59e0b);
            filter: blur(15px); opacity: 0; transition: opacity 0.5s;
            z-index: -1; border-radius: inherit;
        }
        .glow-node:hover::after { opacity: 0.2; }
    </style>
</head>
<body class="bg-transparent">

    <div class="mb-12 p-1 bg-gradient-to-tr from-gray-900 via-blue-900 to-black rounded-[50px] shadow-3xl">
        <div class="p-10 rounded-[46px] bg-gray-950/40 backdrop-blur-xl text-white relative overflow-hidden">
            <div class="absolute right-[-30px] top-[-30px] opacity-10 floating-3d">
                <i data-lucide="shield-check" size="320"></i>
            </div>

            <div class="relative z-10 flex flex-col lg:flex-row justify-between items-center gap-12">
                <div class="flex items-center gap-10">
                    <div class="group relative">
                        <div class="absolute inset-0 bg-blue-600 blur-3xl opacity-30 group-hover:opacity-60 transition-opacity"></div>
                        <div class="w-32 h-32 rounded-[36px] bg-white flex items-center justify-center shadow-[0_25px_50px_rgba(0,0,0,0.5)] transform transition-transform group-hover:rotate-12">
                            <i data-lucide="user-cog" class="w-16 h-16 text-blue-600"></i>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-7xl font-black tracking-tighter leading-none mb-4 bg-clip-text text-transparent bg-gradient-to-b from-white to-gray-400">
                            {{ hr[0] }}
                        </h2>
                        <div class="flex items-center text-blue-400 font-extrabold text-sm uppercase tracking-[0.4em]">
                            <span class="relative flex h-3 w-3 mr-4">
                                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                                <span class="relative inline-flex rounded-full h-3 w-3 bg-blue-500"></span>
                            </span>
                            <i data-lucide="mail" class="w-4 h-4 mr-2"></i> {{ hr[1] }}
                        </div>
                    </div>
                </div>

                <div class="flex flex-col sm:flex-row items-center gap-8">
                    <div class="text-right hidden sm:block border-r border-white/10 pr-10">
                        <p class="text-[10px] font-black text-blue-500 uppercase tracking-widest mb-1">Status</p>
                        <p class="text-xl font-bold text-white uppercase tracking-tighter">Operational</p>
                    </div>
                    <button onclick="toggleAnalysis()" id="analysisBtn" class="group bg-white text-black px-14 py-7 rounded-[28px] font-black text-xs uppercase tracking-[0.2em] transition-all hover:bg-blue-600 hover:text-white hover:scale-105 active:scale-95 shadow-[0_30px_60px_rgba(255,255,255,0.1)] flex items-center gap-4">
                        <span id="btnText">Initiate Full Analysis</span>
                        <i data-lucide="activity" class="w-6 h-6 animate-pulse" id="btnIcon"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="advancedAnalysis" class="hidden opacity-0 transform translate-y-20 transition-all duration-1000 ease-[cubic-bezier(0.175,0.885,0.32,1.275)]">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 pb-12">
            
            <div class="space-y-8">
                <div class="flex items-center justify-between px-6">
                    <h3 class="font-black text-[13px] uppercase text-gray-500 tracking-[0.3em] flex items-center">
                        <i data-lucide="database" class="w-5 h-5 mr-3 text-blue-600"></i> Workforce
                    </h3>
                    <div class="px-4 py-1.5 rounded-full bg-blue-600 text-white text-[11px] font-black shadow-lg shadow-blue-500/30">
                        {{ employees|length }} Records
                    </div>
                </div>
                <div class="space-y-5 max-h-[600px] overflow-y-auto pr-4 custom-scrollbar">
                    {% for emp in employees %}
                    <div class="node-card-3d glow-node glass-panel-3d p-8 rounded-[40px] shadow-2xl group">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <p class="font-black text-gray-900 text-2xl tracking-tighter group-hover:text-blue-600 transition-colors">{{ emp[0] }}</p>
                                <p class="text-[10px] text-blue-500 font-bold uppercase mt-1 tracking-widest">{{ emp[2] }}</p>
                            </div>
                            <div class="w-12 h-12 rounded-2xl bg-gray-50 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-all duration-500">
                                <i data-lucide="id-card" class="w-6 h-6"></i>
                            </div>
                        </div>
                        <div class="space-y-4 pt-6 border-t border-gray-100">
                            <div class="flex justify-between text-[11px] font-black uppercase text-gray-400">
                                <span>Employee ID</span>
                                <span class="text-gray-900">{{ emp[1] }}</span>
                            </div>
                            <div class="flex justify-between text-[11px] font-black uppercase text-gray-400">
                                <span>Department</span>
                                <span class="text-gray-900">{{ emp[3] }}</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    {% if not employees %}
                        <div class="py-32 text-center glass-panel-3d rounded-[50px] border-2 border-dashed border-gray-200">
                            <i data-lucide="database-zap" class="w-16 h-16 text-gray-200 mx-auto mb-6"></i>
                            <p class="text-sm font-black text-gray-400 uppercase tracking-widest">No Personnel Registry Found</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="space-y-8">
                <div class="flex items-center justify-between px-6">
                    <h3 class="font-black text-[13px] uppercase text-gray-500 tracking-[0.3em] flex items-center">
                        <i data-lucide="cpu" class="w-5 h-5 mr-3 text-green-600"></i> Project Matrix
                    </h3>
                </div>
                <div class="space-y-6">
                    {% for proj in projects %}
                    <div class="node-card-3d glass-panel-3d p-8 rounded-[40px] shadow-2xl relative overflow-hidden group">
                        <div class="flex justify-between items-center mb-8">
                            <span class="text-xl font-black text-gray-900 tracking-tighter uppercase">{{ proj[0] }}</span>
                            <div class="flex items-center gap-2 text-green-600 font-black text-xs">
                                <i data-lucide="trending-up" class="w-4 h-4"></i>
                                {{ proj[1] }}%
                            </div>
                        </div>
                        <div class="w-full bg-gray-100 h-4 rounded-full overflow-hidden p-1 shadow-inner">
                            <div class="bg-gradient-to-r from-green-400 to-emerald-600 h-full rounded-full transition-all duration-1000 delay-300" style="width: {{ proj[1] }}%"></div>
                        </div>
                        <div class="mt-8 flex items-center justify-between text-[10px] font-black text-gray-400 uppercase tracking-widest">
                            <span>Deadline Status</span>
                            <span class="text-gray-900">{{ proj[2] }}</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <div class="space-y-8">
                <div class="flex items-center justify-between px-6">
                    <h3 class="font-black text-[13px] uppercase text-gray-500 tracking-[0.3em] flex items-center">
                        <i data-lucide="radio" class="w-5 h-5 mr-3 text-amber-500"></i> Sync Frequency
                    </h3>
                </div>
                <div class="space-y-6">
                    {% for mtg in meetings %}
                    <div class="node-card-3d p-10 bg-gradient-to-br from-blue-700 to-indigo-950 text-white rounded-[45px] shadow-3xl relative overflow-hidden group">
                        <div class="absolute -right-10 -bottom-10 w-40 h-40 bg-blue-500/20 blur-[80px]"></div>
                        
                        <div class="relative z-10">
                            <p class="font-black text-2xl tracking-tight mb-8 leading-tight">{{ mtg[0] }}</p>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 text-center">
                                    <i data-lucide="calendar" class="w-4 h-4 mx-auto mb-2 text-blue-300"></i>
                                    <span class="text-[10px] font-black uppercase tracking-widest">{{ mtg[1] }}</span>
                                </div>
                                <div class="p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 text-center">
                                    <i data-lucide="clock" class="w-4 h-4 mx-auto mb-2 text-amber-400"></i>
                                    <span class="text-[10px] font-black uppercase tracking-widest">{{ mtg[2] }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </div>

    <style>
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { 
            background: linear-gradient(#2563eb, #10b981); 
            border-radius: 20px; 
            border: 3px solid transparent; 
            background-clip: content-box; 
        }
    </style>

    <script>
        lucide.createIcons();

        function toggleAnalysis() {
            const section = document.getElementById('advancedAnalysis');
            const btnText = document.getElementById('btnText');
            const btnIcon = document.getElementById('btnIcon');

            if (section.classList.contains('hidden')) {
                section.classList.remove('hidden');
                // Trigger reflow for animation
                section.offsetHeight; 
                section.classList.add('opacity-100', 'translate-y-0');
                btnText.innerText = "Terminate Full Analysis";
                btnIcon.style.transform = "rotate(180deg) scale(1.3)";
                btnIcon.style.color = "#ff4444";
            } else {
                section.classList.remove('opacity-100', 'translate-y-0');
                section.classList.add('opacity-0', 'translate-y-20');
                setTimeout(() => {
                    section.classList.add('hidden');
                }, 1000);
                btnText.innerText = "Initiate Full Analysis";
                btnIcon.style.transform = "rotate(0deg) scale(1)";
                btnIcon.style.color = "currentColor";
            }
        }
    </script>
</body>
</html>